在嵌入式系统中，当多个中断函数需要读写同一个变量时，必须小心处理以确保数据的一致性和正确性。以下是一些处理这个问题的常见方法：

1. 使用临界区（Critical Section）：
   - 在访问共享变量之前，禁止中断或者使用临界区锁定来保护关键代码段，以防止其他中断函数同时访问该变量。
   - 在离开临界区时，重新启用中断或解锁。确保临界区的持续时间足够短，以减少中断的延迟。
2. 使用原子操作：
   - 一些处理器和编程语言提供原子操作，这些操作可以确保对共享变量的读写是不可中断的。例如，某些处理器提供了原子的读-修改-写操作，如Test-and-Set、Compare-and-Swap等。
3. 使用信号量或互斥锁：
   - 使用信号量或互斥锁来协调多个中断函数对共享资源的访问。只有获得锁的中断函数才能访问变量，其他中断函数必须等待。
4. 使用消息队列或缓冲区：
   - 如果可能，将数据的读写延迟到主循环中，而不是在中断服务程序中执行。中断可以将数据放入消息队列或缓冲区，主循环则负责处理数据。
5. 最小化共享：
   - 尽量减少共享变量的使用。如果可能，将数据分离成多个副本，每个中断函数操作其自己的副本，最后在主循环中进行合并。
6. 仔细规划中断优先级：
   - 确保中断的优先级设置是合理的，以确保在必要时可以正确地防止竞争条件。
7. 进行测试和验证：
   - 对代码进行严格的测试，模拟各种情况，以确保在多个中断函数同时访问变量时不会出现问题。
8. 考虑使用专门的硬件模块：
   - 一些嵌入式系统中有专门的硬件模块，如硬件锁存器，可以用于管理共享资源的访问。

处理多个中断函数访问同一变量的问题需要综合考虑系统架构、中断控制、同步机制等因素，并根据具体情况选择适当的方法。重要的是确保数据一致性和可靠性，同时尽量减少对系统性能的影响。





使用数组的方法，让中断和主程序中对该变量的操作，浓缩为只要一个指令周期就可以搞定的操作。话不多说，上代码：

       全局变量：unsigned short bit[16] = {0};
    
        中断: if（消息1 == 消息）{ bit[0] = 1;}
    
        主程序：if(bit[0] == 1) { //处理消息1； bit[0] = 0;}