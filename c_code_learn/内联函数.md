# C语言内联函数

### 背景：

#### 函数调用

![img](https://developer.qcloudimg.com/http-save/yehe-9895632/785e586030c70b54143861bfff6a195d.png)

现代系统在调用另一个函数时，会先把当前函数一些数据保存到堆栈中，再去执行别的函数，单数调用需要时间去切换。

#### 内联函数

函数B很小，又被频繁的调用，可能函数调用的切换时间比函数内代码的执行时间还长，这样明显划不来，那么我们就可以将这个函数声明为内联(加上 **inline**)，编译器在编译时，会把内联函数的实现替换到每个调用内联函数的地方(**可以与宏函数做类比**)，在调用处将代码展开，相当于自动将函数B的代码在调用它的地方复制了一份副本，没有了保护现场和恢复现场的时间，从而节省了函数调用的开销。

内联函数声明和定义通常需要放在同意文件中，便于编译器展开代码；页允许内联函数在多个文件中定义，但需保证定义完全一致

![img](https://developer.qcloudimg.com/http-save/yehe-9895632/ad39fc72bd74af605d950c0bd12a3ed2.png)

#### 相比与 宏函数

内联函数提供：

1. 参数类型检查
2. 便于调试
3. 封装接口

