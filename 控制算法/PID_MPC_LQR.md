## [PID控制器](https://so.csdn.net/so/search?q=PID控制器&spm=1001.2101.3001.7020)是非常经典的一种控制算法，是不需要知道系统的模型，仅仅根据期望与现状的偏差调节，使之能够到达期望的一种线性控制器。

优点：使用简单，灵活，调节方便。
由于不需要知道系统的模型，仅仅根据反馈量进行调节，新手能够很好地上手。根据反馈量的不同，可以设计出不同的PID控制器，控制的也是反馈量，也就是偏差，使之偏差为零，这个反馈，可以是速度，可以是位置等。调节参数也是只有三个，调节起来还算简单。

缺点：调节精度不高，不够精准
由于PID控制器是线性[控制器](https://so.csdn.net/so/search?q=控制器&spm=1001.2101.3001.7020)，而现实中，大多是非线性的。用线性近似非线性，精度会有所下降。

PID的三个参数
P参数的优缺点
优点：加快调节速度，使之更快到达期望位置，存在静态误差（也就是永远不能达到期望目标，总是差一个值）

缺点：P值增大的时候，曲线震荡幅度增大，震荡更加频繁，增大超调量，系统不够稳定。

D参数的优缺点
优点：减少调节时间，使之更快到达期望位置，减少超调量。

缺点：容易受到干扰，当受到干扰时，D值越大，曲线系统越不稳定。

I参数的优缺点
优点：减少静态误差，使曲线达到期望目标

缺点：增加调节时间，增大超调量。

三个参数总结
这三个参数各有优缺点，对于不同的系统可以根据系统的特征使用不同的参数组合，PD，PI，PID。

例如:
对于干扰比较强的系统，不使用D参数比较好。
对于系统响应速度没有很高要求，适用PI控制比较好。
速度控制使用：PI控制
转向控制使用：PD控制

这些只是经验，可能与实际不符，需要根据实际情况选择和根据实际试错。

周期
采样周期
采样周期是读取信息耗费的时间。比如读取传感器值所需要的时间。

采样周期的确定
综合考虑的因素：

变化频率

变化频率越高的控制对象，采样周期应相应缩短，以实现更好地控制。

采样周期缩短，系统的抗干扰能力也会得到增强。

采样周期太小，积分和微分的调节作用会削弱，因为采样时间过短，前后两次采样的误差反应不出来。

采样周期要与执行机构的动作惯性相适应。惯性大的，采样周期要适当缩短。

采样周期越短，计算的负荷也就越大。要在系统不影响其他控制回路的计算下，缩短采样周期。

一般来说，缩短采样周期，可以使控制性能得到改善，但是也会增加计算的负担。对于变化快速的对象，采样周期需要缩短。

控制周期
控制周期是经过计算，进行的一次的控制时间。比如PID控制器进行对系统进行一次偏差调节。系统的控制周期一般越短越好，越短也就以意味着计算的负担也就越重。

一般来说，采样周期<=控制周期。不然会出现下面情况，变化已经出现了，需要控制了，而控制时间还未到，造成控制的延后。

采样周期和控制周期需要综合考虑。

##  MPC控制算法，即模型预测控制算法，是一种用于解决复杂系统控制问题的有效工具。

MPC控制算法具有准确性高、控制性能好、实时性强、容错性强等优点，有效地解决了复杂系统控制问题。但是MPC控制算法也存在一些缺点，比如在模型设计方面，MPC控制算法需要将系统模型和参数估计分离，这需要大量的实验数据，并且容易造成过度拟合，导致模型不准确;另外，在控制优化的过程中，MPC控制算法缺乏有效的规则，容易造成控制失败。



### 2 模型预测控制与最优控制

最优控制强调的是“最优”，一般最优控制需要在整个时间域上进行求优化（这样才能保证最优性）。最优控制常用的几类解法有 1变分法，2极大值原理，3动态规划。变分法和极大值原理一般来说只能处理线性的模型并且不能含有复杂一点的约束，而动态规划我们知道实际上在求解最优控制问题中是一种比较聪明的穷举法，其计算复杂度往往非常高。最优控制由于过于强调最优性，而暴露出两个问题 1是对于非线性的 包含复杂约束的情况难以求解；2是需要对系统的模型精确的知道。

模型预测控制退而求其次仅仅去考虑未来几个时间步，一定程度上牺牲了最优性。举个例子来说如下图所示，我们在开车，前面路口有一个弯道。如果想要平稳的过弯，我们就需要在进入弯道之前（考虑未来几个时间步）就开始控制车辆的方向和速度。与之相对的一种控制方式就是只看现在的情况，也就是贪婪的方法，那可以想象如果等到车辆行驶到弯道再做动作的话势必会晚了一些。

###  模型预测控制与传统的PID控制比较

优点：

1 模型预测控制善于处理多输入多输出系统，对于如下图所示的多输入多输出系统，虽然也可以采用多个PID控制器进行控制，但是往往由于各个控制回路之间存在耦合关系，其PID参数的整定变得非常困难。与之相对的模型预测控制的优势就是非常方便的可以考虑多输入多输出系统，用一个MPC控制器就可以解决。

2 模型预测控制可以处理约束

现实世界中往往存在各种各样的约束条件，例如前面举得开车的例子中，对车速有约束（因为有交通法规限速），对加速度也有约束（因为发动机的负载是有限的）。由于模型预测控制是通过构建优化问题来求解控制器的动作的，所以可以非常自然的将这些约束建立在优化问题中以此来保证这些约束的满足。

3 模型预测控制是有向前考虑未来时间步的有限时域优化

这个在前面对比模型预测控制和最优控制的时候已经讲过了，这里就不多说了。实际上模型预测控制采用了一个折中的策略，既不是像最优控制那样考虑这个时域，也不是完全的贪婪控制仅仅考虑当前，而是考虑未来的有限时间域。

缺点

1.实时性较差

MPC最后形成的优化问题是一个二次规划问题，那么可以借助丰富的运筹优化的理论来求解这个二次规划问题。所以MPC是外壳套着控制，内涵是一个优化方法。

从这里可以看到模型预测控制需要在每一个时间步迭代求解优化问题，而优化问题的求解往往是比较耗费时间的，而控制器的动作对实时性要求可能会比较强一些，这样就会产生一个矛盾，这也是目前模型预测控制的一个主要缺点。

2.计算量大

3对参数比较敏感



LQR:

### 适用场景：路径曲率较小并连续且不能变化过快，故非常适合中高速的城市驾驶跟踪场景

（1）计算未来固定时间段内的最优，只计算一次，执行所有计算出的控制序列，没有考虑执行时产生的误差以及干扰对于系统的影响。
（2）LQR模型没有约束，只能通过后处理加约束
（3）LQR没有约束，不是转化为QP问题进行求解，而是通过求解Riccati黎卡提方程，最终u = -kx进行求解

MPC:
（1）计算未来一小段时间内的最优，只执行第一个序列的控制值，下一个周期继续滚动计算最优控制序列。
（2）MPC模型有约束，可以添加多个约束
（3）MPC最终转化为QP问题，调用工具求解器进行求解

PID:
只关注当前时刻的误差，不关注未来时间段内的误差，没有预见性，易造成超调和“画龙”现象。