# 报错：opencv  fatal error: gtk/gtk.h: No such file or directory 



## 1.  尝试：

```shell
#尝试gtk3.0的版本
sudo apt-get install libgtk-3-dev

#sudo apt-get install libgtk2.0-dev  备选
```

如果还不行，下面命令将同时安装 gtk3.0 和 2.0：

```shell
sudo apt-get install build-essential gnome-devel
```

这时候PC上会存在两个版本的gtk 。

尝试重新生成 

```shell
cmake  命令... 

make -j20
```

还是不行

如果发现

```shell
pkg-config --cflags --libs gtk+-3.0
```

如果显示不存在尝试：

```shell
reboot
pkg-config --list-all|grep gtk
pkg-config --cflags --libs gtk **  #对应你用上面命令找到的版本
```

或者你的gtk版本

有输出

```
edgeboard@paddlepi:~/Downloads/opencv-4.9.0/build$ pkg-config --cflags gtk+-3.0
-pthread -I/usr/local/include -I/usr/local/include/cairo -I/usr/local/include -I/usr/local/include/libdrm -I/usr/local/include/cairo -I/usr/local/include/pixman-1 -I/usr/local/include -I/home/leon.he/Projects/rogue_um/binary_sprd_linux_xorg_debug/target_aarch64/usr/local/include -I/home/leon.he/Projects/rogue_um/binary_sprd_linux_xorg_debug/target_aarch64/usr/local/include/freetype2 -I/usr/local/include -I/usr/local/include/freetype2 -I/usr/local/include/libpng12 -I/usr/local/include -I/usr/include/gtk-3.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib/aarch64-linux-gnu/dbus-1.0/include -I/usr/include/gtk-3.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng16 -I/usr/include/glib-2.0 -I/usr/lib/aarch64-linux-gnu/glib-2.0/include
```

则使用下面的步骤：

## 2.直接手改make文件，解决opencv编译抽风

定位文件：

```shell
opencv4.9.0/build/modules/highgui/CMakeFiles/opencv_highgui.dir/flags.make
```

运行：`pkg-config --cflags gtk+-3.0`

获得头文件目录，并复制到 文件 中 `CXX_INCLUDES =` 后面：

```shell
-I/usr/local/include -I/usr/local/include/cairo -I/usr/local/include -I/usr/local/include/libdrm -I/usr/local/include/cairo -I/usr/local/include/pixman-1 -I/usr/local/include -I/home/leon.he/Projects/rogue_um/binary_sprd_linux_xorg_debug/target_aarch64/usr/local/include -I/home/leon.he/Projects/rogue_um/binary_sprd_linux_xorg_debug/target_aarch64/usr/local/include/freetype2 -I/usr/local/include -I/usr/local/include/freetype2 -I/usr/local/include/libpng12 -I/usr/local/include -I/usr/include/gtk-3.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib/aarch64-linux-gnu/dbus-1.0/include -I/usr/include/gtk-3.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng16 -I/usr/include/glib-2.0 -I/usr/lib/aarch64-linux-gnu/glib-2.0/include
```

运行： `pkg-config --libs gtk+-3.0`

获得动态链接库flag，并复制到 文件 中 `CXX_FLAGS = ` 后面

```shell
-L/usr/local/lib -lgtk-3 -lgdk-3 -lpangocairo-1.0 -lpango-1.0 -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0
```



最终 `flags.make` 长这样：

```
# CMAKE generated file: DO NOT EDIT!
# Generated by "Unix Makefiles" Generator, CMake Version 3.10

# compile CXX with /usr/bin/c++
CXX_FLAGS =    -fsigned-char -W -Wall -Wreturn-type -Wnon-virtual-dtor -Waddress -Wsequence-point -Wformat -Wformat-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wuninitialized -Wsuggest-override -Wno-delete-non-virtual-dtor -Wno-comment -Wimplicit-fallthrough=3 -Wno-strict-overflow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -fdata-sections    -fvisibility=hidden -fvisibility-inlines-hidden -Wno-deprecated-declarations -O3 -DNDEBUG  -DNDEBUG -fPIC   -std=c++11 -L/usr/local/lib -lgtk-3 -lgdk-3 -lpangocairo-1.0 -lpango-1.0 -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0

CXX_DEFINES = -DCVAPI_EXPORTS -DENABLE_PLUGINS -DHAVE_GTHREAD -DHAVE_GTK -DHAVE_GTK3 -DHAVE_WEBP -D_USE_MATH_DEFINES -D__OPENCV_BUILD=1 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS

CXX_INCLUDES = -I/home/edgeboard/Downloads/opencv-4.9.0/build -I/home/edgeboard/Downloads/opencv-4.9.0/modules/highgui/include -I/home/edgeboard/Downloads/opencv-4.9.0/build/modules/highgui -I/home/edgeboard/Downloads/opencv-4.9.0/modules/core/include -I/home/edgeboard/Downloads/opencv-4.9.0/modules/imgproc/include -I/home/edgeboard/Downloads/opencv-4.9.0/modules/imgcodecs/include -I/home/edgeboard/Downloads/opencv-4.9.0/modules/videoio/include -I/usr/local/include -I/usr/local/include/cairo -I/usr/local/include -I/usr/local/include/libdrm -I/usr/local/include/cairo -I/usr/local/include/pixman-1 -I/usr/local/include -I/home/leon.he/Projects/rogue_um/binary_sprd_linux_xorg_debug/target_aarch64/usr/local/include -I/home/leon.he/Projects/rogue_um/binary_sprd_linux_xorg_debug/target_aarch64/usr/local/include/freetype2 -I/usr/local/include -I/usr/local/include/freetype2 -I/usr/local/include/libpng12 -I/usr/local/include -I/usr/include/gtk-3.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib/aarch64-linux-gnu/dbus-1.0/include -I/usr/include/gtk-3.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng16 -I/usr/include/glib-2.0 -I/usr/lib/aarch64-linux-gnu/glib-2.0/include -isystem /usr/local/include/eigen3 -isystem /usr/local/include -isystem /usr/local/include/cairo -isystem /usr/local/include/libdrm -isystem /usr/local/include/pixman-1 


```







编译通过~